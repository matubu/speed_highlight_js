var x={num:{type:"num",match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g},str:{type:"str",match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g},strDouble:{type:"str",match:/"((?!")[^\r\n\\]|\\[^])*"?/g}};var c={},f=(t="")=>{var a,n,s,e;return(e=(n=(a=t.replaceAll("&","&#38;")).replaceAll)==null?void 0:(s=n.call(a,"<","&lt;")).replaceAll)==null?void 0:e.call(s,">","&gt;")},o=(t,a)=>a?`<span class="shj-syn-${a}">${t}</span>`:t;async function m(t,a,n){var s;try{let e,l,i={},d,r=[],h=0,u=typeof a=="string"?await((s=c[a])!=null?s:c[a]=import(`./languages/${a}.js`)):a,p=[...typeof a=="string"?u.default:a.sub];for(;h<t.length;){for(i.index=null,e=p.length;e-- >0;){if(l=p[e].expand?x[p[e].expand]:p[e],r[e]===void 0||r[e].match.index<h){if(l.match.lastIndex=h,d=l.match.exec(t),d===null){p.splice(e,1),r.splice(e,1);continue}r[e]={match:d,lastIndex:l.match.lastIndex}}r[e].match[0]&&(r[e].match.index<=i.index||i.index===null)&&(i={part:l,index:r[e].match.index,match:r[e].match[0],end:r[e].lastIndex})}if(i.index===null)break;n(t.slice(h,i.index),u.type),h=i.end,i.part.sub?await m(i.match,typeof i.part.sub=="string"?i.part.sub:typeof i.part.sub=="function"?i.part.sub(i.match):i.part,n):n(i.match,i.part.type)}n(t.slice(h,t.length),u.type)}catch{n(t)}}async function y(t,a,n=!0,s={}){let e="";return await m(t,a,(l,i)=>e+=o(f(l),i)),n?`<div><div class="shj-numbers">${"<div></div>".repeat(!s.hideLineNumbers&&t.split(`
`).length)}</div><div>${e}</div></div>`:e}async function g(t,a=(e=>(e=t.className.match(/shj-lang-([\w-]+)/))==null?void 0:e[1])(),n,s){let l=t.textContent;n!=null||(n=`${t.tagName=="CODE"?"in":l.split(`
`).length<2?"one":"multi"}line`),t.dataset.lang=a,t.className=`${[...t.classList].filter(i=>!i.startsWith("shj-")).join(" ")} shj-lang-${a} shj-${n}`,t.innerHTML=await y(l,a,n=="multiline",s)}var $=async t=>await Promise.all(Array.from(document.querySelectorAll('[class*="shj-lang-"]')).map(a=>g(elm,void 0,void 0,t))),v=(t,a)=>{c[t]=a};export{$ as highlightAll,g as highlightElement,y as highlightText,v as loadLanguage,m as tokenize};
